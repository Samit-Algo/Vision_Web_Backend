{
    "rules": [
      {
        "rule_id": "class_presence",
        "rule_name": "Class Presence",
        "description": "Triggers when at least one object of a specific class is detected.",
      
        "intent_examples": [
          "Notify me when my son comes home",
          "Alert if a person appears",
          "Tell me if someone enters"
        ],
      
        "model": "yolov8m.pt",
      
        "detectable_classes": [
          "person",
          "person_without_helmet",
          "dog",
          "car",
          "chair"
        ],
      
        "required_fields_from_user": [
          "class"
        ],
      
        "time_window": {
          "supported": true,
          "required": true
        },
      
        "zone_support": {
          "supported": false,
          "required": false
        },
      
      
        "execution_modes": {
          "continuous": {
            "description": "Runs continuously and triggers whenever the object appears",
            "required_fields": [],
            "forbidden_fields": [
              "interval_minutes",
              "check_duration_seconds"
            ],
            "zone_required": false
          },
          
          "patrol": {
            "description": "Runs periodically and checks for the object at intervals",
            "required_fields": [
              "interval_minutes",
              "check_duration_seconds"
            ],
            "zone_required": false
          }
        },
      
        "rules_config_fields": [
          "class",
          "label"
        ],
      
        "defaults": {
          "fps": 1,
          "confidence": 0.7,
          "run_mode": "continuous"
        }
      },

      {
        "rule_id": "object_enter_zone",
        "rule_name": "Object Enter Zone",
        "description": "Triggers when an object enters a defined polygon zone. User must draw MINIMUM 3 POINTS to create a polygon. The system checks if the center point of detected objects is inside the polygon.",
      
        "intent_examples": [
          "Alert if someone enters restricted area",
          "Notify when a car enters the gate"
        ],
      
        "model": "yolov8n.pt",
      
        "detectable_classes": [
          "person",
          "car",
          "truck"
        ],
      
        "required_fields_from_user": [
          "class"
        ],
      
        "time_window": {
          "supported": true,
          "required": true
        },
      
        "zone_support": {
          "supported": true,
          "required": true,
          "zone_type": "polygon",
          "min_points": 3,
          "max_points": null,
          "supports_polygon": true,
          "supports_line": false,
          "description": "User must draw a POLYGON with MINIMUM 3 POINTS to define the detection zone. NO LINE DRAWING - ONLY POLYGON. The system uses the center point of detected objects to check if they are inside the polygon zone."
        },
      
        "execution_modes": {
          "continuous": {
            "description": "Continuously monitors the zone for object entry",
            "required_fields": [],
            "forbidden_fields": [
              "interval_minutes",
              "check_duration_seconds"
            ],
            "zone_required": true
          },
      
          "patrol": {
            "description": "Checks the zone periodically for object entry",
            "required_fields": [
              "interval_minutes",
              "check_duration_seconds"
            ],
            "zone_required": true
          }
        },
      
        "rules_config_fields": [
          "class",
          "label"
        ],
      
        "defaults": {
          "fps": 1,
          "confidence": 0.7,
          "run_mode": "continuous"
        }
      },

      {
        "rule_id": "gesture_detected",
        "rule_name": "Gesture Detected",
        "description": "Triggers when a gesture or action is detected.",
      
        "intent_examples": [
          "Alert if someone falls down",
          "Notify when fighting happens"
        ],
      
        "model": "YOLO-Gestures-v1",
      
        "detectable_gestures": [
          "falling_down",
          "fighting"
        ],
      
        "required_fields_from_user": [
          "gesture"
        ],
      
        "time_window": {
          "supported": true,
          "required": true
        },
      
        "zone_support": {
          "supported": false,
          "required": false
        },
      
        "execution_modes": {
          "continuous": {
            "description": "Continuously monitors for the gesture",
            "required_fields": [],
            "forbidden_fields": [
              "interval_minutes",
              "check_duration_seconds"
            ],
            "zone_required": false
          },
      
          "patrol": {
            "description": "Checks periodically for the gesture",
            "required_fields": [
              "interval_minutes",
              "check_duration_seconds"
            ],
            "zone_required": false
          }
        },
      
        "rules_config_fields": [
          "gesture"
        ],
      
        "defaults": {
          "fps": 2,
          "confidence": 0.7,
          "run_mode": "continuous"
        }
      },

      {
        "rule_id": "proximity_detection",
        "rule_name": "Proximity Detection",
        "description": "Triggers when object A comes too close to object B.",
      
        "intent_examples": [
          "Alert if a person gets close to excavator",
          "Notify when forklift approaches worker"
        ],
      
        "model": "YOLO-Safety-v1",
      
        "detectable_classes": [
          "person",
          "excavator",
          "machinery"
        ],
      
        "required_fields_from_user": [
          "class_a",
          "class_b",
          "distance"
        ],
      
        "time_window": {
          "supported": true,
          "required": true
        },
      
        "zone_support": {
          "supported": false,
          "required": false
        },
      
        "execution_modes": {
          "continuous": {
            "description": "Continuously checks proximity between objects",
            "required_fields": [],
            "forbidden_fields": [
              "interval_minutes",
              "check_duration_seconds"
            ],
            "zone_required": false
          },
      
          "patrol": {
            "description": "Checks proximity periodically",
            "required_fields": [
              "interval_minutes",
              "check_duration_seconds"
            ],
            "zone_required": false
          }
        },
      
        "rules_config_fields": [
          "class_a",
          "class_b",
          "distance"
        ],
      
        "defaults": {
          "fps": 1,
          "run_mode": "continuous"
        }
      },

      {
        "rule_id": "weapon_detection",
        "rule_name": "Weapon Detection",
        "description": "Triggers when a weapon is detected in the camera view using pose and VLM analysis.",
      
        "intent_examples": [
          "Alert me if someone has a gun",
          "Notify when a weapon is detected",
          "Alert if a person is holding a knife",
          "Tell me if someone carries a firearm"
        ],
      
        "model": "yolov8m-pose.pt",

        "detectable_weapons": [
          "gun",
          "knife"
        ],
      
        "required_fields_from_user": [],
      
        "time_window": {
          "supported": true,
          "required": true
        },
      
        "zone_support": {
          "supported": false,
          "required": false
        },
      
        "execution_modes": {
          "continuous": {
            "description": "Continuously monitors for weapon presence",
            "required_fields": [],
            "forbidden_fields": [
              "interval_minutes",
              "check_duration_seconds"
            ],
            "zone_required": false
          },
      
          "patrol": {
            "description": "Checks periodically for weapon presence",
            "required_fields": [
              "interval_minutes",
              "check_duration_seconds"
            ],
            "zone_required": false
          }
        },
      
        "rules_config_fields": [
          "buffer_size",
          "arm_angle_threshold",
          "vlm_confidence_threshold",
          "temporal_consistency_frames",
          "vlm_throttle_seconds"
        ],
      
        "defaults": {
          "fps": 1,
          "run_mode": "continuous",
          "buffer_size": 5,
          "arm_angle_threshold": 45,
          "vlm_confidence_threshold": 0.7,
          "temporal_consistency_frames": 4,
          "vlm_throttle_seconds": 2
        }
      },

      {
        "rule_id": "sleep_detection",
        "rule_name": "Sleep Detection",
        "description": "Triggers when a person near a machine or in the camera view is detected sleeping (lying down or standing/nodding off). Uses pose keypoints (torso angle, head position, motion) to flag possible sleep, then sends 3 frames to a Vision Language Model (VLM) to confirm before alerting. Works when eyes are not clearly visible (e.g. blurry or distant).",

        "intent_examples": [
          "Alert me if someone is sleeping near the machine",
          "Notify when a person is sleeping on the floor",
          "Detect if a worker is sleeping or nodding off",
          "Alert if someone is lying down asleep",
          "Tell me when a person is sleeping standing",
          "Monitor for sleeping persons",
          "Sleep detection near equipment",
          "Alert on sleeping worker"
        ],

        "model": "yolov8n-pose.pt",

        "detectable_classes": [
          "person"
        ],

        "required_fields_from_user": [],

        "time_window": {
          "supported": true,
          "required": true
        },

        "zone_support": {
          "supported": false,
          "required": false
        },

        "execution_modes": {
          "continuous": {
            "description": "Continuously monitors for sleeping persons",
            "required_fields": [],
            "forbidden_fields": [
              "interval_minutes",
              "check_duration_seconds"
            ],
            "zone_required": false
          },

          "patrol": {
            "description": "Checks periodically for sleeping persons",
            "required_fields": [
              "interval_minutes",
              "check_duration_seconds"
            ],
            "zone_required": false
          }
        },

        "rules_config_fields": [
          "buffer_size",
          "temporal_consistency_frames",
          "vlm_confidence_threshold",
          "vlm_throttle_seconds",
          "vlm_frames_dir",
          "kp_confidence_threshold",
          "torso_angle_lying_deg",
          "head_down_angle_deg",
          "min_nose_below_shoulder_px",
          "head_down_majority_ratio",
          "motion_threshold_px"
        ],

        "defaults": {
          "fps": 1,
          "run_mode": "continuous",
          "buffer_size": 5,
          "temporal_consistency_frames": 4,
          "vlm_confidence_threshold": 0.7,
          "vlm_throttle_seconds": 2,
          "vlm_frames_dir": "sleep_vlm_frames",
          "kp_confidence_threshold": 0.0,
          "torso_angle_lying_deg": 35,
          "head_down_angle_deg": 25,
          "min_nose_below_shoulder_px": 10,
          "head_down_majority_ratio": 0.5,
          "motion_threshold_px": 25
        }
      },

      {
        "rule_id": "class_count",
        "rule_name": "Class Count",
        "description": "Counts objects of a specific class. For crossing detection, user must draw exactly 2 points to create a counting line. The system tracks objects and increments count when the center point of an object crosses the line. Without a line, performs simple per-frame counting.",
      
        "intent_examples": [
          "Count how many people entered the room",
          "Count people crossing the line",
          "How many cars passed through the gate",
          "Count objects crossing this line",
          "How many people are there",
          "count people",
          "count cars",
          "person count",
          "vehicle count",
          "count the workers"
        ],
      
        "model": "yolov8l.pt",
      
        "detectable_classes": [
          "person",
          "car",
          "truck",
          "bicycle",
          "dog",
          "cat"
        ],
      
        "required_fields_from_user": [
          "class"
        ],
      
        "time_window": {
          "supported": true,
          "required": true
        },
      
        "zone_support": {
          "supported": true,
          "required": false,
          "zone_type": "line",
          "min_points": 2,
          "max_points": 2,
          "supports_polygon": false,
          "supports_line": true,
          "line_for_crossing": true,
          "description": "For counting objects crossing a boundary, user draws EXACTLY 2 POINTS to create a line. NO POLYGON NEEDED. The system uses the center point of each detected object - when the center point crosses the user-drawn line, the count increments by 1. Object tracking ensures each object is counted only once. Without a line, the system performs simple per-frame counting of all visible objects."
        },
      
        "execution_modes": {
          "continuous": {
            "description": "Continuously counts objects (with or without zone)",
            "required_fields": [],
            "forbidden_fields": [
              "interval_minutes",
              "check_duration_seconds"
            ],
            "zone_required": false
          },
      
          "patrol": {
            "description": "Counts objects periodically",
            "required_fields": [
              "interval_minutes",
              "check_duration_seconds"
            ],
            "zone_required": false
          }
        },
      
        "rules_config_fields": [
          "class",
          "label"
        ],
      
        "defaults": {
          "fps": 1,
          "confidence": 0.7,
          "run_mode": "continuous"
        }
      },

      {
        "rule_id": "box_count",
        "rule_name": "Box Count",
        "description": "Counts boxes or packages. For crossing detection, user must draw exactly 2 points to create a counting line. The system tracks boxes and increments count when the center point of a box crosses the line. Without a line, performs simple per-frame counting.",
      
        "intent_examples": [
          "Count boxes",
          "How many boxes are there",
          "Count boxes crossing the line",
          "Count how many packages passed through",
          "How many boxes entered",
          "box count",
          "count the boxes"
        ],
      
        "model": "box_detection.pt",
      
        "detectable_classes": [
          "box",
          "package",
          "container",
          "bag",
          "suitcase"
        ],
      
        "required_fields_from_user": [
          "class"
        ],
      
        "time_window": {
          "supported": true,
          "required": true
        },
      
        "zone_support": {
          "supported": true,
          "required": false,
          "zone_type": "line",
          "min_points": 2,
          "max_points": 2,
          "supports_polygon": false,
          "supports_line": true,
          "line_for_crossing": true,
          "description": "For counting boxes crossing a boundary, user draws EXACTLY 2 POINTS to create a line. NO POLYGON NEEDED. The system uses the center point of each detected box - when the center point crosses the user-drawn line, the count increments by 1. Box tracking ensures each box is counted only once. Without a line, the system performs simple per-frame counting of all visible boxes."
        },
      
        "execution_modes": {
          "continuous": {
            "description": "Continuously counts boxes (with or without zone/line)",
            "required_fields": [],
            "forbidden_fields": [
              "interval_minutes",
              "check_duration_seconds"
            ],
            "zone_required": false
          },
      
          "patrol": {
            "description": "Counts boxes periodically",
            "required_fields": [
              "interval_minutes",
              "check_duration_seconds"
            ],
            "zone_required": false
          }
        },
      
        "rules_config_fields": [
          "class",
          "label"
        ],
      
        "defaults": {
          "fps": 1,
          "confidence": 0.7,
          "run_mode": "continuous"
        }
      },

      {
        "rule_id": "restricted_zone",
        "rule_name": "Restricted Zone Detection",
        "description": "Triggers an alert when a specified object is detected inside a restricted zone. User must draw MINIMUM 3 POINTS to create a polygon defining the restricted area. The system checks if the center point of detected objects falls inside the polygon. The zone polygon is visible on the live stream. Applies alert cooldown to prevent spam.",
      
        "intent_examples": [
          "Alert if a person is in the restricted zone",
          "Notify when someone enters the no-go area",
          "Detect if any person is inside the danger zone",
          "Alert when a car is parked in the restricted area",
          "Monitor the restricted zone for unauthorized access"
        ],
      
        "model": "yolov8l.pt",
      
        "detectable_classes": [
          "person",
          "car",
          "truck",
          "bicycle",
          "motorcycle",
          "dog"
        ],
      
        "required_fields_from_user": [
          "class"
        ],
      
        "time_window": {
          "supported": true,
          "required": true
        },

        "zone_support": {
          "supported": true,
          "required": true,
          "zone_type": "polygon",
          "min_points": 3,
          "max_points": null,
          "supports_polygon": true,
          "supports_line": false,
          "description": "User must draw a POLYGON with MINIMUM 3 POINTS to define the restricted area. NO LINE DRAWING - ONLY POLYGON. The system uses the center point of each detected object to check if it's inside the polygon zone. If the object's center point is within the polygon boundaries, an alert is triggered. The zone polygon is continuously monitored and visible on the live stream."
        },

        "execution_modes": {
          "continuous": {
            "description": "Continuously monitors the restricted zone for object presence",
            "required_fields": [],
            "forbidden_fields": [
              "interval_minutes",
              "check_duration_seconds"
            ],
            "zone_required": true
          },
      
          "patrol": {
            "description": "Periodically checks the restricted zone for object presence",
            "required_fields": [
              "interval_minutes",
              "check_duration_seconds"
            ],
            "zone_required": true
          }
        },
      
        "rules_config_fields": [
          "class",
          "label",
          "alert_cooldown_seconds"
        ],
      
        "defaults": {
          "fps": 2,
          "confidence": 0.7,
          "run_mode": "continuous",
          "alert_cooldown_seconds": 10
        }
      },

      {
        "rule_id": "fall_detection",
        "rule_name": "Fall Detection",
        "description": "Detects when a person falls down using pose keypoint analysis. Monitors body angle, height, and sudden downward movement to identify falls. Requires pose detection model (YOLOv8 Pose). Triggers alert when fall is confirmed after multiple consecutive frames.",
      
        "intent_examples": [
          "Alert me if any person fall detected",
          "Alert me if any fall detected",
          "Notify me when someone falls down",
          "Detect if a person falls",
          "Alert if someone falls",
          "Tell me if a person falls",
          "Monitor for falls",
          "Detect human falls",
          "Alert on fall detection",
          "Notify when fall is detected"
        ],
      
        "model": "yolov8l-pose.pt",
      
        "detectable_classes": [
          "person"
        ],
      
        "required_fields_from_user": [],
      
        "time_window": {
          "supported": true,
          "required": true
        },
      
        "zone_support": {
          "supported": false,
          "required": false
        },
      
        "execution_modes": {
          "continuous": {
            "description": "Continuously monitors for fall detection",
            "required_fields": [],
            "forbidden_fields": [
              "interval_minutes",
              "check_duration_seconds"
            ],
            "zone_required": false
          },
      
          "patrol": {
            "description": "Checks periodically for fall detection",
            "required_fields": [
              "interval_minutes",
              "check_duration_seconds"
            ],
            "zone_required": false
          }
        },
      
        "rules_config_fields": [
          "class",
          "label",
          "alert_cooldown_seconds",
          "confidence_threshold",
          "kp_confidence_threshold",
          "lying_angle_threshold",
          "hip_drop_threshold",
          "height_drop_ratio",
          "min_height_for_standing",
          "confirm_frames"
        ],
      
        "defaults": {
          "fps": 5,
          "confidence": 0.5,
          "run_mode": "continuous",
          "class": "person",
          "alert_cooldown_seconds": 10,
          "confidence_threshold": 0.5,
          "kp_confidence_threshold": 0.3,
          "lying_angle_threshold": 50,
          "hip_drop_threshold": 15,
          "height_drop_ratio": 0.25,
          "min_height_for_standing": 300,
          "confirm_frames": 3
        }
      },

      {
        "rule_id": "fire_detection",
        "rule_name": "Fire Detection",
        "description": "Detects fire and smoke in the camera view using a fine-tuned YOLO model. Triggers critical alerts when fire is detected. Uses consecutive frame confirmation to reduce false positives from flickering lights or reflections.",
      
        "intent_examples": [
          "Alert me if any fire detected",
          "If any fire detected alert me",
          "Notify me when there is fire",
          "Detect fire in the area",
          "Alert if fire is detected",
          "Tell me if there is a fire",
          "Monitor for fire",
          "Detect flames",
          "Alert on fire detection",
          "Notify when fire is detected",
          "Alert me if there is smoke",
          "Detect smoke or fire",
          "Fire alarm",
          "Fire alert",
          "Watch for fire",
          "Fire monitoring"
        ],
      
        "model": "fire_detection.pt",
      
        "detectable_classes": [
          "fire",
          "flame",
          "smoke"
        ],
      
        "required_fields_from_user": [],
      
        "time_window": {
          "supported": true,
          "required": true
        },
      
        "zone_support": {
          "supported": true,
          "required": false,
          "zone_type": "polygon",
          "min_points": 3,
          "max_points": null,
          "supports_polygon": true,
          "supports_line": false,
          "description": "Optional polygon zone to monitor specific areas for fire. User can draw MINIMUM 3 POINTS to define the monitoring zone. If no zone is specified, the entire camera view is monitored for fire."
        },
      
        "execution_modes": {
          "continuous": {
            "description": "Continuously monitors for fire detection. Recommended for safety-critical applications.",
            "required_fields": [],
            "forbidden_fields": [
              "interval_minutes",
              "check_duration_seconds"
            ],
            "zone_required": false
          },
      
          "patrol": {
            "description": "Checks periodically for fire detection",
            "required_fields": [
              "interval_minutes",
              "check_duration_seconds"
            ],
            "zone_required": false
          }
        },
      
        "rules_config_fields": [
          "classes",
          "label",
          "alert_cooldown_seconds",
          "confidence_threshold",
          "confirm_frames"
        ],
      
        "defaults": {
          "fps": 5,
          "confidence": 0.5,
          "run_mode": "continuous",
          "classes": ["fire", "flame", "smoke"],
          "alert_cooldown_seconds": 10,
          "confidence_threshold": 0.5,
          "confirm_frames": 2
        }
      }
      
      
      
    ]
  }
